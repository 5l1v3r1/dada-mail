=pod

=head1 Dada Mail 7 to Dada Mail 8 Upgrade Guide

=head1 Perl Minimum Version: 5.10.1

Dada Mail now requires v5.10.1 of Perl, the previous minimum version was v5.8.1.

=head1 FastCGI Support

Dada Mail now has FastCGI support! FastCGI support is explained in detail here: 

L<http://dadamailproject.com/d/features-fastcgi.pod.html>

In a nutshell, FastCGI allows you to run Dada Mail in a persistent environment. A persistent environment cuts out much of the startup time that happens when running Dada Mail as a CGI script. 

This time-savings really becomes apparent if you have a busy website, where Dada Mail is being accessed many times a second. Switching between the two ways Dada Mail can be run (CGI and FastCGI) is fairly easy to do, and we suggest trying out Dada Mail as a plain CGI app, before moving to running it as a FastCGI app.

=head1 CGI::Application-based

Dada Mail has been fully moved to the CGI::Application framework. This is one of the reasons we've been able to have FastCGI support. PSGI support could theoretically be easy to support as well, with a little tinkering. 

More on C<CGI::Application>: 

L<https://metacpan.org/pod/CGI::Application>

=head1 Cronjobs

Cronjobs in v8 are vastly simplified, with only one cronjob needing to be set, no matter what features and plugins you have enabled with Dada Mail. 

Cronjobs created prior to v8 are no longer used in Dada Mail, so if you are upgrading, you will need to reset your cronjobs: remove the ones that exist for Dada Mail, and add the one new cronjob that's now needed. 

The cronjob that's needed will be shown at the last screen of the included installer, as well as in the List Control Panel, under: B<App Information -- Scheduled Jobs> 

This cronjob can be customized, and the output of the cronjob can be logged by Dada Mail - both these options can be configured in the Installer as well. See the docs on Scheduled Jobs in Dada Mail: 

L<http://dadamailproject.com/d/features-scheduled_cronjobs.pod.html>

=head1 Supported Backends

=head2 SQL

All the current SQL backends: SQLite, MySQL and PostgreSQL are still supported, but the B<Default (file-based) Backend will finally be retired>. 

If you are upgrading your Dada Mail to version 8, and are still running the Default Backend, you will need to migrate to one of the SQL backends.  

=head1 Plugins

Plugins work entirely different in v8 of Dada Mail. In prior versions, plugins were basically smaller apps that worked independently from the main Dada Mail app (mail.cgi).  

You can see this reflecting in the URL to visit the plugin's control panel screen. Prior to v8, the URL would look like this, 

L<http://example.com/cgi-bin/dada/plugins/plugin_name.cgi>

In v8, they now look like this, 

L<http://example.com/cgi-bin/dada/mail.cgi/plugins/plugin_name>

You're now just called the mail.cgi script, and, C</plugins/plugin_name> are just paramaters passed in the C<PATH_INFO>. 
 
This is to keep the infrastructure of Dada Mail as simple as possible - there's only one app (run persistently if running under FastCGI) that needs to be dealt with. 

Some plugins had command line interfaces - those interfaces have all been removed in the name of simplicity. 

=head2 Removed Plugins

=head3 Mailing Monitor (mailing_monitor.cgi) 

The functionality of the C<mailing_monitor.cgi> plugin has been folded into the code of Dada Mail - no plugin needed. 

=head3 Beatitude (scheduled_mailings.pl) 

Beatitude, after many years of being marked as, "deprecated", has been removed from Dada Mail. The biggest problem is that the internal architecture of Beatitude was just not going to work as a FastCGI app. 

Scheduling Mass Mailings is supported within the core of Dada Mail, although recurring schedules (run a message every day or every week, etc) are still not supported.

=head3 default_mass_mailing_messages.cgi

The core of Dada Mail now supports Stationery, which allows you to set multiple messages that you can use to start a new draft. 

=head1 TODO

=head2 Testing! 

Other than FastCGI support, v8 does not have too many different features that differentiate it from v7. Although under the hood, the code organization and execution is very different. This means that pretty much anything could  be broken, and these bugs can only be found by testing everything out. 

We could really use your feedback. Please contact us directly: 

L<http://dadamailproject.com/contact/>

Start a new thread, 

L<http://dadamailproject.com/support/boards>

sign up and post to the dadadev mailing list: 

L<http://dadamailproject.com/cgi-bin/dada/mail.cgi/list/dadadev/>

or file an issue (please post the version you're using (ie: v8):

L<https://github.com/justingit/dada-mail/issues>

And tell us how well Dada Mail 8 is working for you.

We're most concerned about how Dada Mail is running under FastCGI - that's all new to us, and we're almost positive that there's some issues to work out in some particularily important parts of the app (mass mailing sending!) 

=head2 Unfinished

Remember v8 is currently an ALPHA release, and shouldn't be put into production. 

=head3 FastCGI and Error Logs

Currently, if you run Dada Mail under FastCGI, warnings and errors will not be sent to Dada Mail's own error log, but instead will be printed in the server's own error log. We haven't yet figured a way to keep the previous behavior. 

=cut
