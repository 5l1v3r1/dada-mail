=pod

=head1 Upgrading Dada Mail

=head1 Introduction

Before upgrading Dada Mail, find out how you installed and configured Dada Mail before. If you don't know or aren't sure, don't upgrade Dada Mail: you will run into major headaches. 

=head2 "Basic", or, "Contemporary"? (Or Simple Scripts?)

We're going to only differentiate between two types of installations: "Basic" and, "Contemporary" I<(If you installed Dada Mail using the included installer, you have a B<Contemporary> installation)>

=head3 Basic Installation 

A, B<Basic> installation changes the configuration variables right in the, C<dada/DADA/Config.pm> file - usually you want to be very much aware of the following variables: 

=over

=item * $PROGRAM_ROOT_PASSWORD

=item * $FILES

=item * $MAILPROG

=item * $PROGRAM_URL

=back

You'll know if you have a B<Basic> installation of Dada Mail if the
 C<$FILES> variable in the, C<dada/DADA/Config.pm> file is  filled out to a directory that I<actually> exists and that directory holds files/directories that have something to do with Dada Mail. 

If you are running a B<Basic> Installation of Dada Mail, we really suggest upgrading by taking note of where your C<$FILES> variable is located and importing the old information I<after> a clean installation.

=head4 More Information

L<http://dadamailproject.com/support/documentation/basic_two_contemporary_installation.pod.html>

=head3 Contemporary Installation 

A Contemporary Installation uses an outside configuration file to set the configuration variables in. 

You'll know if you have a Contemporary Installation, if those same four variables in the, C<dada/DADA/Config.pm> file: 

=over

=item * $PROGRAM_ROOT_PASSWORD

=item * $FILES

=item * $MAILPROG

=item * $PROGRAM_URL

=back

Are still in their default values and your Dada Mail seems to be 
functioning fine. This probably means that your config variables are being read from an outside config file. 

For upgrade purposes, note what the, C<$PROGRAM_CONFIG_FILE_DIR> in the, C<dada/DADA/Config.pm> is set to. It's OK if it's only set to, C<auto>. 

=head3 Simple Scripts Installation

If you installed Dada Mail through Simple Scripts (L<http://simplescripts.com>) you have two good choices when it comes to upgrading. 

=head4 Upgrade Through Simple Scripts

Upgrade a Simple Scripts installed Dada Mail through Simple Scripts on interface (look for an "Upgrade" link, or Simple Scripts may alert you of updates). 

=head4 Turn a Simple Scripts Install into a Contemporary Installation

If you want to use the included Dada Mail installer to upgrade Dada Mail (perhaps, you purchased Pro Dada?), you can turn a Simple Scripts install into a Contemporary Installation with these directions: 

L<http://dadamailproject.com/d/upgrade_from_simple_scripts.pod.html>

=head1 Step #1 Move The Old Program Files Out of the Way

Dada Mail, "The Program" is the collection of files and directories that are in the directory called, C<dada>. 

If you've followed out installation instructions, this directory is most likely located in your I<cgi-bin>. It's directory structure like this: 

 cgi-bin (directory)
    - dada (directory, _lower_ case)
        - mail.cgi 
        - DADA (directory, UPPER case)
            - App (directory)
            - Config.pm
            - etc, etc, etc

This is Dada Mail, B<"The Program">

Simply rename this directory on your hosting account from: 

 dada

to something like:

 dada-old_ver

Moving the directory: 

=over 

=item * Keeps a backup that is known to work 

=item * Makes sure we don't overwrite the old version of the program with the new version

=item * Makes sure we don't mix up the old version of Dada Mail with the new version of Dada Mail 

=back


=head2 Step #2 Install the new Dada Mail

Now, you can just follow the instructions for an installation of Dada Mail: 

L<http://dadamailproject.com/support/documentation/install_dada_mail.pod.html>


=over

=item * If your last installation was a Contemporary Installation, use the same value as before for your C<.dada_files> location. 

Your Dada Files Location is usually the directory above your C<PROGRAM_CONFIG_FILE_DIR> variable. For example, if my C<PROGRAM_CONFIG_FILE_DIR> is set to: 

I</home/myaccount/.dada_files/.configs>

my C<.dada_files> directory is: 

I</home/myaccount/.dada_files>

=item * If your last installation was a Basic Installation, install Dada Mail as if it's a brand new installation and then move your old list/settings/archives/etc files over: 

L<http://dadamailproject.com/support/documentation/basic_two_contemporary_installation.pod.html>

=back

In the installer, type in the current location of your, C<.dada_files> directory. The installer may also see that it's "best guess" is
already the current location of your C<.dada_files> directory. It'll warn you about this, just in case it is not your intention to upgrade Dada Mail using that specific C<.dada_files> directory. This is probably only an issue if you have multiple copies of Dada Mail installed. 

Fill out the form fields of the installer, just like you were doing a installation. Click the, "Configure Dada Mail!" button. 

The installer will refresh the screen with the same configuration screen, but with B<two new options>, under another warning that the installer couldn't create the, C<.dada_files> directory. 


=head4 First Option: Use the existing directory structure, but create a new configuration file, using the configuration below

The first option, I<Use the existing directory structure, but create a new configuration file, using the configuration below> allows you to upgrade your current Dada Mail, while using a fresh copy of the C<.dada_config> file. 

This option may be useful in helping you keep a current C<.dada_config> file. In many cases, upgrades to Dada Mail between minor dot releases (for example, v4.B<5>.0 and v4.B<6>.0 come with changes to the default C<.dada_config> file. These changes may include incompatibilities if you use your current C<.dada_config> file. 

The downside of using this option is that any changes you've personally made to your C<.dada_config> file will be lost. You still may manually move over your customizations from the old C<.dada_config> file, which is backed up for you and the new C<.dada_config> file. 

Make sure to double check the Dada Mail changelog and fix any incompatibility between versions. Currently, this will be something you'll have to do manually.

If you are upgrading a Dada Mail install that is configured with an SQL backend, you may also have to confirm that the SQL database you've typed in the login information for is OK to use. 

=head4 Second Option: Use the existing directory structure and configuration file, ignoring the configuration below.

The second option, I<Use the existing directory structure and configuration file, ignoring the configuration below.> will leave your Dada Mail configuration alone, and simply allow you to upgrade to the latest version of Dada Mail.

If you have any plugins/extensions that you've installed with the installer from a previous installation, the installer will I<try> its best to at least change the permissions of each plugin/extension you have already installed to continue working. It's possible that the installer I<cannot> detect a plugin/extension install, so you may have to reinstall the plugin/extension manually.

=head2 Changelog 

It's a B<I<very very>> good idea to look at the changelog and not B<any> incompatibilities> between versions. It's possible that incompatibilities could break your installation, when you upgrade. 

=head1 Screencasts

The following screencast walks through how to upgrade Dada Mail. The original Dada Mail was installed using the Dada Mail installer: 

=for html <p><iframe width="640" height="390" src="http://www.youtube.com/embed/lNRpQ7LxvtU?hd=1" frameborder="0" allowfullscreen></iframe></p>

