<!-- begin partial_sending_options_widget.tmpl --> 




<!-- tmpl_if can_have_subscriber_fields --> 


    <fieldset>
     <legend>
      
	  <a href="#" class="toggleDivs" data-target="partial_sending_options_widget">
      +/- 
     </a>Partial Mailing List Sending
     </legend>    
     
     <div id="partial_sending_options_widget" style="display:none;width:90%">

    <p>
     Send your Mailing List Message  to your Subscribers where their:
    </p> 
    
	<div id="field_comparisons"> 
    <table> 
	
    <!-- tmpl_loop undotted_fields --> 
        <tr> 
         <td> 
          <p>
           <strong>
            <!-- tmpl_var label -->:
           </strong> 
          </p>
         </td> 
         <td>
          <p>
           <select name="field_comparison_type_<!-- tmpl_var name -->" id="field_comparison_type_<!-- tmpl_var name -->"> <!--  onChange="get_partial_list()" -->  
            
			<!-- tmpl_if field_comparison_type --> 
				<option value="<!-- tmpl_var field_comparison_type -->" selected="selected"><!-- tmpl_var field_comparison_type --></option>	
			<!-- /tmpl_if --> 
			
			<option value="like">Is Like</option>
            <option value="equal_to">Is Equal To</option> 
           </select> 
          </p>
         </td>
         <td>
          <p>
           <input type="text" name="field_value_<!-- tmpl_var name -->" id="field_value_<!-- tmpl_var name -->" value="<!-- tmpl_var field_value -->"/> <!-- onKeyUp="get_partial_list()" -->  
          </p>
         </td>
        </tr> 
    <!-- /tmpl_loop --> 
    
    </table> 
    </div> 
	
    <div class="buttonfloat">
     <input type="button" value="Preview Who's Getting This Message..." class="cautionary" onClick="get_partial_list()" />  
    </div>
    
    <div class="floatclear">
    </div>
	<div id="previewMessageReceivers_loading" style="display:none">
		<p class="alert">Loading...</p>
	</div> 
       <div id="previewMessageReceivers"> 
      </div> 
     </div> 
    </fieldset>


	<script type="text/javascript">
	    //<![CDATA[

		 function get_partial_list(){ 


			var f_params = {}; 
			
			var al                       = new Array();
			var alternative_lists        = ''; 
			var multi_list_send_no_dupes = 0; 
			
			
			$("#field_comparisons :input").each(function() {
			      f_params[this.name] = this.value; 
			});
			$("input:checkbox[name=alternative_list]:checked").each(function() {
		  		al.push(this.value); 
			});
			alternative_lists = al.join(','); 
			if(
				$('#multi_list_send_no_dupes').val() == 1 && 
				$("#multi_list_send_no_dupes").prop("checked") == true
			) { 
				multi_list_send_no_dupes = 1;
			}
			f_params['f']                        = 'previewMessageReceivers';
			f_params['alternative_lists']        = alternative_lists,
			f_params['multi_list_send_no_dupes'] = multi_list_send_no_dupes,
			
			$('#previewMessageReceivers_loading').show(); 
			$('#previewMessageReceivers').hide(); 	
			var request = $.ajax({
				url: "<!-- tmpl_var S_PROGRAM_URL -->",
				type: "POST",
				cache: false,
				data: f_params,
				dataType: "html"
			});
			request.done(function(content) {
				$("#previewMessageReceivers_loading").hide();
				$("#previewMessageReceivers").html( content ).show( 'blind' );
			});
		}
	    //]]>
	</script>
	
	
    
    
<!-- tmpl_else --> 

    <!-- Multiple Subscriber Fields isn't support with this backend (Apparently) --> 

<!-- /tmpl_if --> 

    
<!-- end partial_sending_options_widget.tmpl --> 
